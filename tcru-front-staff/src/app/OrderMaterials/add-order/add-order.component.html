<div class="main-container" style="height: 155vh;" id="element-to-export">
    <!-- <div class="card" style="margin-top: 30px; margin-right: 10px; margin-left: 10px;"> -->

    <!-- หัวเรื่อง -->
    <h5 class="card-title">ใบสั่งซื้อวัตถุดิบ</h5>

    <!-- body -->
    <section class="content-header">
        <div class="card-body">
            <form [formGroup]="form">
                <!-- หัวเรื่องข้อมูลใบสั่งซื้อ -->
                <div class="card-header">
                    <div class="col-sm-12">
                        <label>ข้อมูลใบสั่งซื้อ</label>
                    </div>
                </div>

                <div class="card card_primary">
                    <div class="card-body">
                        <div class="row">
                            <!-- เลือกร้านค้า -->
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>ชื่อร้านค้า</label>
                                    <select class="form-control" formControlName="shop_name" [(ngModel)]=OrderMaterials.shop_name>
                                        <option value="">ร้านค้า</option>
                                        <option *ngFor="let suppiler of suppilerArr" value="{{suppiler.id}}">{{suppiler.store_name}}</option>
                                    </select>
                                </div>
                            </div>

                            <!-- ผู้ติดต่อ -->
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>ชื่อผู้ติดต่อ</label>
                                    <input type="text" class="form-control" formcontrolName="contact_person">
                                </div>
                            </div>

                            <!-- เบอร์โทรศัพท์ผู้ติดต่อ -->
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>เบอร์โทรศัพท์ผู้ติดต่อ</label>
                                    <input type="text" class="form-control" formcontrolName="phone_contact_person">
                                </div>
                            </div>

                            <!-- เลขที่ใบสั่งซื้อ -->
                            <div class="col-sm-3">
                                <div class="form-gorup">
                                    <label>เลขที่ใบสั่งซื้อ</label>
                                    <input type="text" class="form-control" formcontrolName="order_number" placeholder="EX: PO-1903">
                                </div>
                            </div>

                            <!-- ที่อยู่ในการจัดส่งวัตถุดิบ -->
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>ที่อยู่จัดส่ง</label>
                                    <textarea formControlName="address" type="text" class="form-control"></textarea>
                                </div>
                            </div>

                            <!-- เลือกวันที่ -->
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>วันที่สั่งซื้อวัตถุดิบ</label>
                                    <input type="date" [value]="from | date:'yyyy-MM-dd'" (input)="updateFromDate($event)" class="form-control" placeholder="วันที่สั่งซื้อวัตถุดิบ" />
                                </div>
                            </div>

                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>วันที่ได้รับวัตถุดิบ</label>
                                    <input type="date" [value]="to | date:'yyyy-MM-dd'" (input)="updateToDate($event)" class="form-control" placeholder="วันที่ได้รับวัตถุดิบ" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>

                <!-- หัวเรื่องรายการสั่งซื้อ -->
                <div class="card-header">
                    <div class="col-sm-12">
                        <label>รายการ</label>
                    </div>
                </div>

                <!-- หัวเรื่องย่อยรายการวัตถุดิบ -->
                <div class="card card-primary">
                    <div class="card-body">
                        <div class="row">
                            <!-- เพิ่มรายการสินค้า -->
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>ชื่อวัตถุดิบ</label>
                                </div>
                            </div>

                            <!-- รายละเอียด -->
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>รายละเอียด</label>
                                </div>
                            </div>

                            <!-- จำนวน -->
                            <div class="col-sm-1">
                                <div class="form-group">
                                    <label>จำนวน</label>
                                </div>
                            </div>

                            <!-- ราคา/ชิ้น -->
                            <div class="col-sm-1">
                                <div class="form-group">
                                    <label>ราคา</label>
                                </div>
                            </div>

                            <!-- ส่วนลด -->
                            <div class="col-sm-1">
                                <div class="form-group">
                                    <label>ส่วนลด</label>
                                </div>
                            </div>

                            <!-- จำนวนภาษีมูลค่าเพิ่ม -->
                            <div class="col-sm-1">
                                <div class="form-group">
                                    <label>Vat</label>
                                </div>
                            </div>
                        </div>

                        <div formArrayName="materials" *ngFor="let material of materials().controls; let i = index" [formGroupName]="i">
                            <div class="row">
                                <!-- เพิ่มรายการสินค้า -->
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <input type="text" class="form-control" formcontrolName="material_name">
                                    </div>
                                </div>

                                <!-- รายละเอียด -->
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <textarea formControlName="detail" type="text" class="form-control"></textarea>
                                    </div>
                                </div>

                                <!-- จำนวน -->
                                <div class="col-sm-1">
                                    <div class="form-group">
                                        <input type="text" class="form-control" formcontrolName="quantity">
                                    </div>
                                </div>

                                <!-- ราคา/ชิ้น -->
                                <div class="col-sm-1">
                                    <div class="form-group">
                                        <input type="text" class="form-control" formcontrolName="price">
                                    </div>
                                </div>

                                <!-- ส่วนลด -->
                                <div class="col-sm-1">
                                    <div class="form-group">
                                        <input type="text" class="form-control" formcontrolName="discount">
                                    </div>
                                </div>

                                <!-- จำนวนภาษีมูลค่าเพิ่ม -->
                                <div class="col-sm-1">
                                    <div class="form-group">
                                        <input type="text" class="form-control" formcontrolName="vat">
                                    </div>
                                </div>

                                <!-- <div class="col-sm-1">
                                    <button type="submit" class="btn btn-success">Submit</button>
                                </div> -->

                                <div class="col-sm-1">
                                    <button (click)="removeMaterials(i)" class="btn btn-danger">ลบ</button>
                                </div>
                            </div>
                        </div>
                        <!-- ปุ่มเพิ่มรายการ -->
                        <div class="col-sm-1">
                            <button class="btn btn-success" (click)="addMaterials()">เพิ่ม</button>
                        </div>




                    </div>
                </div>
                <br>

                <!-- หัวเรื่องสรุปรายการ -->
                <div class="card-header">
                    <div class="col-sm-12">
                        <label>สรุปรายการสั่งซื้อ</label>
                    </div>
                </div>

                <!-- สรุปรายการ -->
                <div class="card card-primary">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-3">ยอดรวม</div>
                            <div class="col-sm-3">{{sum_price | currency: 'THB' : 'symbol-narrow' : '1.2-2'}}</div>
                        </div>

                        <div class="row">
                            <div class="col-sm-3">ส่วนลด</div>
                            <div class="col-sm-3">...</div>
                        </div>

                        <div class="row">
                            <div class="col-sm-3">Vat</div>
                            <div class="col-sm-3">...</div>
                        </div>

                        <div class="row">
                            <div class="col-sm-3">รวมเงินทั้งสิ้น</div>
                            <div class="col-sm-3">...</div>
                        </div>
                    </div>
                </div>
                <br>

                <!-- ปุ่มเพิ่ม-ยกเลิก -->
                <div class="row">
                    <div class="form-group">
                        <td>
                            <button class="btn btn-block btn-success ">ยืนยัน</button>
                        </td>
                        <td>
                            &nbsp; <button class="btn btn-secondary  " routerLink="/showOrderM"> กลับ</button>
                        </td>
                    </div>
                </div>

            </form>
        </div>
    </section>
</div>